# NYC Trees, Air Quality, and Wealth Distribution

### Environmental Data Analysis and Modeling 
by Annie Bishai 

---
It is well documented that climate change and environmental degradation are impacting poor communities globally with greater [severity](https://www.globalcitizen.org/en/content/climate-change-is-connected-to-poverty/) than their wealthy counterparts. While New York City has not yet seen the degree of devastation by storms, flooding, and water depletion -- to name a few impacts of climate change -- that developing countries have seen, the [impacts](https://www.dec.ny.gov/energy/94702.html) of climate change are evident in rising temperatures, increased precipitation, and rising sea levels. More significantly, New York City is a locus of pollution, with cars, trucks and boilers continuing to emit various toxic and climate-change-causing particles into the air. While air pollution has been [reduced](https://gothamist.com/news/new-york-citys-air-quality-is-improving-but-it-still-isnt-healthy-enough ) in the last 20 years, toxins in the air continue to be a health risk to New Yorkers, especially children, and especially in the vicinity of [highways](https://bklyner.com/opinion-the-bqe-is-in-a-state-of-total-crisis-and-so-are-the-local-residents-who-literally-need-a-breath-of-fresh-air/) and airports. The air-quality data in this repository, sourced from [NYC OpenData](https://data.cityofnewyork.us/Environment/Air-Quality/c3uy-2p5r), includes yearly estimates of four common pollutants -- PM2.5, nitrogen dioxide, sulfur dioxide, and ozone -- from 2009-2017, as well as estimates of car and truck traffic density in 2005 and 2016. These figures are based on the New York City Community Air Survey and statistical modeling (please see Documentation directory for specifics on this data source).
 
One of the municipal efforts to mitigate air pollution in New York is the planting and maintenance of street trees, which purify air, absorb some carbon dioxide emissions, and lower city temperatures during summer. They also provide shade for pedestrians and add visual appeal to the neighborhoods they are in. New York City has over 600,000 of these trees, [planted and maintained](https://www.nycgovparks.org/trees/street-tree-planting) by the city’s Department of Parks & Recreation across all five boroughs, and cataloged every ten years in the [NYC Street Tree Census](https://www.nycgovparks.org/trees/treescount). The starting point of this project was curiosity about these tree censuses as information about the city’s diverse neighborhoods. I wondered about the impact of these trees on air quality and the relationships between their abundance, size, health, and diversity with the wealth of residents who live near them. I went on to ask the question: Are historic measures of air pollution street trees accurate predictors of income in New York? This investigation seeks to answer this question and to open the door for further research into environmental equality in New York using publicly available data.
 
In this project, environmental quality is rated for each 2010 census tract using aggregate measures of street trees from 2005 and 2015 and air quality measures for the community district containing the census tract. NYC’s 59 community districts are much larger than its roughly 2100 census tracts, but these are the smallest areas for which I was able to find air quality data; therefore the air quality data is more generalized and less precise than the tree data. 
 
Following data analysis of tree and air quality metrics across New York City’s districts, I fitted a regressor model to the data to predict median household income by census tract, using 2017 data from [Data USA](https://datausa.io/profile/geo/new-york-ny). Income is just one measure of economic status and vulnerability; it was chosen as a starting point in this project because of its close relationship to an individual or family’s range of choice of where to live. I selected the year 2017  because this was the last hear for which air quality data was available from the source I used. Thus, the independent variables in this model include environmental observations from 2005-2017, or the twelve years leading up to the time of dependent variable data collection. Using data from different time spans is one way in which this model might be both improved and made more useful.



# Methodology
The 2005 and 2015 Tree Censuses include observations on individual street trees in New York City. Using Geopandas, I matched each tree counted to its respective 2010 census tract, based on latitude and longitude recorded in the tree census and publicly available shapefiles of the census tracts. I then reconfigured the individual tree measures into aggregates by 2010 census tract, in order that each of these microdistricts could serve as an observation in my model.

In order to incorporate air quality metrics, I used the same method with shapefiles of New York's Community Districts, matching each tree to its respective district (an integer) and using the mode of these matches in each census tract to estimate the best overlap between census tract and community district. These steps are shown in `notebooks/geosetup_aggregate_data` in this repo.

After doing exploratory data analysis using Geopandas and Tableau (see `notebooks/EDA`), I attempted training several models on the data. Among the various ensemble models from the scikit-learn library that I tried, the Random Forest Regressor performed best in predicting household income based on the features included. I tuned the model using GridSearchCV and ran the model with several different selections of features. This is shown in `notebooks/modeling`. 

# Results 

The Random Forest model predicted with less error than the null model (i.e. mean household income), but it retained high variance throughout many iterations. The R2 score on the training set was 0.9458; the R2 score on the testing set was 0.6509 -- meaning that 65% of variance in median household income is explained by the independent variables in the model. The model's mean squared error showed a 65.15% improvement from the null.

The variance in the model -- as seen through a residual plot categorized by borough (below) -- shows that the model predicted less accurately in wealthier census tracts; it predicted best in the Bronx and worst in Manhattan. This suggests the need for better feature selection and/or engineering; it also reinforces the implication of the .65 R2 score, which is that there is substantial variance in income in New York City that cannot be accounted for by the variables used.

![residual plot](Visuals/resid_plot.png?raw=true)


# Applications and Further Steps
The intent of this project is to derive insights into the relationship between economic status and environmental quality in New York City, and to open the door to further research into the impacts of pollution and tree planting on economically vulnerable communities. 

Further steps for this project include continued feature engineering and revisions to feature selection, based on further research into the subject matter. For instance, it may be of use to refine the time periods used for environmental data. Most importantly, this analysis and modeling will be of greater use if it can be applied to more current data. Tree censuses are only conducted decennially, but given that NYC Parks plants trees every year and receives reports on trees in need of removal or care, it may be feasible to obtain periodically updated data on street trees. Air quality data is also needed for more recent years, and would be more useful on a more localized level. Hospitalizations and deaths attributable to air pollution are available in the same air quality dataset I used; these are measured in different districts but could be incorporated into this study without much difficulty.  If this data were used, the model could be reenvisioned to predict hospitalization and death rates based on street tree data, historic air quality measures, and income data on a census tract level.

Please feel free to build upon this project as you wish! Thank you for visiting.