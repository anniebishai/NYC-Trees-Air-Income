# Trees, Air Quality, and Wealth Distribution in New York City
It is well documented that climate change and environmental degradation are impacting poor communities globally with greater severity than their wealthy counterparts [source](https://www.globalcitizen.org/en/content/climate-change-is-connected-to-poverty/). While New York City has not yet seen the degree of devastation by storms, flooding, and water depletion in the way developing parts of the world have seen, the [impacts](https://www.dec.ny.gov/energy/94702.html) of climate change are evident in rising temperatures, increased precipitation, and rising sea levels. More significantly, New York City is a locus of pollution, with cars, trucks and boilers continuing to emit various toxic and climate-change-causing particles into the air. While air pollution has been [reduced](https://gothamist.com/news/new-york-citys-air-quality-is-improving-but-it-still-isnt-healthy-enough ) in the last 20 years, toxins in the air continue to be a health risk to New Yorkers, especially children, and especially in the vicinity of [highways](https://bklyner.com/opinion-the-bqe-is-in-a-state-of-total-crisis-and-so-are-the-local-residents-who-literally-need-a-breath-of-fresh-air/) and airports. The air-quality data in this repository, sourced from [NYC OpenData](https://data.cityofnewyork.us/Environment/Air-Quality/c3uy-2p5r), includes yearly estimates of PM2.5, nitrogen dioxide, sulfur dioxide, and ozone from 2009-2017, as well as estimates of traffic density in 2005 and 2016. These estimates are based on the New York City Community Air Survey and statistical modeling (please see Documentation directory in this repo for specifics on this data source).
 
One of the municipal efforts to mitigate air pollution in New York is the planting and maintenance of street trees, which purify air, absorb some carbon dioxide emissions, and lower city temperatures during summer. They also provide shade for pedestrians and add visual appeal to the neighborhoods they are in. New York City has over 600,000 of these trees, [planted and maintained](https://www.nycgovparks.org/trees/street-tree-planting) by the city’s Department of Parks & Recreation across all five boroughs, and cataloged every ten years in the [NYC Street Tree Census](https://www.nycgovparks.org/trees/treescount). The starting point of this project was curiosity about these tree censuses as information about the city’s diverse neighborhoods. I wondered about the impact of these trees on air quality and the relationships between their abundance, size, health, and diversity with the wealth of residents who live near them. 
 
In this project, environmental quality is rated for each 2010 census tract using aggregate measures of street trees from 2005 and 2015 and air quality measures for the community district containing the census tract. NYC’s 59 community districts are much larger than its roughly 2100 census tracts, but these are the smallest areas for which I was able to find air quality data; therefore the air quality data is more generalized and less precise than the tree data. 
 
Following data analysis of tree and air quality metrics across New York City’s districts, I fitted a regressor model to the data to predict median household income by census tract, using 2017 data from [Data USA](https://datausa.io/profile/geo/new-york-ny). Income is just one measure of economic status and vulnerability; it was chosen as a starting point in this project because of its close relationship to an individual or family’s range of choice of where to live. I selected the year 2017  because this was the last hear for which air quality data was available from the source I used. Thus, the independent variables in this model include environmental observations from 2005-2017, or the twelve years leading up to the time of dependent variable data collection. Using data from different time spans is one way in which this model might be both improved and made more useful.
 
Are historic air pollution metrics and street tree metrics accurate predictors of income in New York? This investigation seeks to answer this question and to open the door for further research into environmental equality in New York using publicly available data.


# Methodology

The 2005 and 2015 Tree Censuses include observations on individual street trees in New York City. Using Geopandas and the publicly available shapefiles linked below, and the latitude and longitude for each tree counted in the censuses, I reconfigured the individual tree measures into aggregates by 2010 census tract, in order that each of the approximately 2100 census tracts could serve as an observation in my model. Household income, the target variable in the model, is estimated for each census tract in the American Community Survey; I used the 2017 data in order to maintain a close temporal relationship between the span of tree measures, environmental measures, and the target income variable. Code fort stages of the project 

Other features examined and used for modeling are air quality measures and household access to parks. Average seasonal measures of pollutants -- fine particulate matter (PM2.5), nitrogen dioxide (NO2), sulfur dioxide (SO2), and ozone (O3) -- from nine consecutive years (2009-2017), as well as traffic density as measured in 2005 and 2016, are recorded not by census tract but by larger Community Districts. Once again bringing in publicly available district shapefiles and using Geopandas, I matched each tree to its overlapping (or most closely overlapping) community district and allowed that district's air quality and park access measures to stand in as a measure for the census tract.

After doing exploratory data analysis using Geopandas and Tableau, I attempted fitting several models to the data. Among the various ensemble models from the scikit-learn library that I tried, the Random Forest Regressor performed best in predicting household income based on the features included. I tuned the model using GridSearchCV and ran the model with several different selections of features. (I also tried using PCA, which did not yield a better result than keeping the features untransformed and selecting features based on my observations in EDA). 

# Results 

The Random Forest model predicted with less error than the null model (i.e. mean household income), but it retained high variance throughout many iterations. The R2 score on the training set was 0.9458; the R2 score on the testing set was 0.6509 -- meaning that 65% of variance in median household income is explained by the independent variables in the model. The model's mean squared error showed a 65.15% improvement from the null.

The variance in the model -- as seen through a residual plot categorized by borough (below) -- shows that the model predicted less accurately in wealthier census tracts; it predicted best in the Bronx and worst in Manhattan. This suggests the need for better feature selection and/or engineering; it also reinforces the implication of the .65 R2 score, which is that there is substantial variance in income in New York City that cannot be accounted for by the variables used.

![residual plot](Visuals/resid_plot.png?raw=true)


# Applications and Further Steps
Predicting potential impact of tree-planting, pollution-reduction efforts on geographic income stratification 
Identifying areas of high risk for adverse health effects of climate change/pollution
